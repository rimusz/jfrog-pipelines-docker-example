resources:
  - name: dbp_repo
    type: GitRepo
    configuration:
      gitProvider: github_token                    # <-- replace with your integration
      path: rimusz/jfrog-pipelines-docker-example # <-- replace with your repository name
      branches:
        include: ^main$
      buildOn:
        commit: true
        pullRequestCreate: false
        tagCreate: false

  - name: dbp_image
    type: Image
    configuration:
      registry: art_token                                # <-- replace with your artifactory integration
      sourceRepository: docker-local                    # <-- required if registry is Artifactory
      imageName: jfrog-platform.kube-lab.xyz/docker-local/dbp  # < -- replace with your image path and name
      imageTag: latest
      autoPull: true
      
  - name: dbp_build_info
    type: BuildInfo
    configuration:
      sourceArtifactory: art_token 
      buildName: dbp_build
      buildNumber: 1    

  - name: dbp_promoted_build_info
    type: BuildInfo
    configuration:
      sourceArtifactory: art_token 
      buildName: dbp_build
      buildNumber: 1
